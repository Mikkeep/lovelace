{% extends 'stats/basic_answer_stats.html' %}

{% block extra-stats %}
  <div>Hint coverage of unique incorrect answers: {{ hint_coverage_unique }}</div>
  <div>Hint coverage of all incorrect answers: {{ hint_coverage_given }}</div>
{% endblock %}

{% block user-answers %}  
  {% if answer_data %}
  <table>
    <tr><th>User answer</th><th>Count</th><th>Correct?</th><th>Hint given?</th><th>Latest answer</th></tr>
    {% for answer, count, correct, hinted, latest, matches in answer_data %}
    <tr>
      <td class="answer">{{ answer }}</td>
      <td>{{ count }}</td>
      <td class="{% if correct %}correct{% else %}incorrect{% endif %}">
        <span {% if matches %}onmouseover="show_matches(this);"
              onmouseout="hide_matches(this);"{% endif %}>{{ correct }}</span>
        {% if matches %}
          <div class="matches-list">
            Matching answers:
            <ul>
              {% for match, error in matches %}
                <li>
                  <span class="match">{{ match|escape }}</span>
                  {% if error %}
                    <span class="error">{{ error|escape }}</span>
                  {% endif %}
                </li>
              {% endfor %}
            </ul>  
          </div>
        {% endif %}
      </td>
      <td class="{% if hinted %}hinted{% else %}unhinted{% endif %}">{{ hinted }}</td>
      <td>{{ latest|date:"Y-m-d, H:i:s" }}</td>
    </tr>
    {% endfor %}
  </table>
  {% endif %}
{% endblock %}
