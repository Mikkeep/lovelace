{% load staticfiles %}
{% if tasktype and tasktype != "lecture" %}
  <div class="task-meta-container" style="position:relative;width:0px;height:0px;">
  <div class="task-meta">
    {% if evaluation == "not_answered" %}
      <img src="{% static 'courses/question_mark.png' %}" width="96" height="96" alt="?" title="You haven't answered this exercise yet">
    {% elif evaluation == "incorrect" %}
      <img src="{% static 'courses/incorrect.png' %}" width="96" height="96" alt="✘" title="You have answered this exercise incorrectly">
    {% elif evaluation == "correct" %}
      <img src="{% static 'courses/correct.png' %}" width="96" height="96" alt="✔" title="You have answered this exercise correctly">
    {% endif %}
    <hr>
    Deadline: yyyy-mm-dd
    <hr>
    
    <div><a href="{% url 'courses:show_answers' user course_slug content_slug %}" title="View your previous answers"><span class="answer-count">538</span> answers</a></div>

    {% if user.is_active and user.is_staff %}
    <hr>
    <div class="admin-tools">
      <div><b>Teacher's tools</b></div>
      <ul>
      <li><div><a href="{% url 'stats:single_task' content_slug %}">Statistics</a></div></li>
      <li><div><a href="{{ content.get_admin_change_url }}">Edit this {{ content.get_human_readable_type }}</a></div></li>
      <li><div><a href="TODO">View reference answer</a></div></li>
      <li><div><span>Url-name: </span><span>{{ content_slug }}</span></div></li>
      </ul>
    </div>
    {% endif %}
    
  </div>
  </div>

  {% if emb_content %}
    <div>{{ emb_content|safe }}</div>
  {% endif %}
  <div class="question">
    <form id="{{ content_slug }}-form" class="task" method="POST" enctype="multipart/form-data"
          action="{% url 'courses:check' course_slug content_slug %}"
          onsubmit="validateAnswer(event);return false;">
      {% csrf_token %}
      {% if question %}{{ question|safe }}{% endif %}
      {% if tasktype == "MULTIPLE_CHOICE_EXERCISE" %}
        {% for choice in choices %}
          <div class="input-label-container">
            <input type="radio" name="{{ content_slug }}-radio" id="{{ choice.id }}" value="{{ choice.id }}" class="task_radio"><label for="{{ choice.id }}">{{ choice.answer }}</label>
          </div>
        {% endfor %}
      {% elif tasktype == "CHECKBOX_EXERCISE" %}
        {% for choice in choices %}
          <div class="input-label-container">
            <input type="checkbox" name="{{ choice.id }}" id="{{ choice.id }}" value="{{ choice.id }}" class="task_check"><label for="{{ choice.id }}">{{ choice.answer }}</label>
          </div>
        {% endfor %}
      {% elif tasktype == "TEXTFIELD_EXERCISE" %}
        <textarea name="answer" class="task_text" placeholder="Enter your answer here" rows="3"></textarea><br>
      {% elif tasktype == "FILE_UPLOAD_EXERCISE" %}
        <label for="collaborators" class="file">Collaborators:</label><input name="collaborators" type="text" size="60" class="task_file" placeholder="Who did you co-operate with?"><br>
        <label for="file" class="file">Submit your files here:</label><input name="file" type="file" class="task_file" multiple="multiple"><br>
        {% comment %}Use the accept and multiple properties for the file!{% endcomment %}
      {% endif %}
      <input type="submit" name="submit" value="Send answer">
      {% if not user.is_authenticated %}
        <div class="auth_warning">Warning: You have not logged in. Your answer will not be saved.</div>
      {% endif %}
      {% if evaluation == "not_answered" %}
        <div class="answered_status"></div>
      {% elif evaluation == "incorrect" %}
        <div class="answered_status"><span class="incorrect">You have previously answered this task incorrectly.</span></div>
      {% elif evaluation == "correct" %}
        <div class="answered_status"><span class="correct">You have already answered this task correctly.</span></div>
      {% endif %}
    </form>
    <div id="result"></div>
  </div>  
{% endif %}
